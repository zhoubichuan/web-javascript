<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>四.图片优化 | JavaScript学习笔记</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/web-javascript/home.png">
    <link rel="manifest" href="/web-javascript/manifest.json">
    <script src="/web-javascript/dll/vendor.dll.js"></script>
    <script src="https://webapi.amap.com/maps?v=2.0&amp;key=46c9ed4e2d25a0e0ee7c883fd5b1a0c8"></script>
    <script src="https://webapi.amap.com/ui/1.1/main.js?v=1.1.1"></script>
    <meta name="description" content="个人总结的vuepress学习技术文档-语法">
    <meta name="keywords" content="vuepress,最新技术文档,vuepress语法,markdown语法">
    
    <link rel="preload" href="/web-javascript/assets/css/0.styles.b166fd3a.css" as="style"><link rel="preload" href="/web-javascript/assets/js/app.eecc1585.js" as="script"><link rel="preload" href="/web-javascript/assets/js/3.e9ec0dc9.js" as="script"><link rel="preload" href="/web-javascript/assets/js/104.5a65ca34.js" as="script"><link rel="preload" href="/web-javascript/assets/js/6.8c68cd55.js" as="script"><link rel="prefetch" href="/web-javascript/assets/js/10.3d96434f.js"><link rel="prefetch" href="/web-javascript/assets/js/100.c80e2656.js"><link rel="prefetch" href="/web-javascript/assets/js/101.b804cd29.js"><link rel="prefetch" href="/web-javascript/assets/js/102.175bd153.js"><link rel="prefetch" href="/web-javascript/assets/js/103.607461ea.js"><link rel="prefetch" href="/web-javascript/assets/js/105.7cb69fce.js"><link rel="prefetch" href="/web-javascript/assets/js/106.f380fdd3.js"><link rel="prefetch" href="/web-javascript/assets/js/107.cf8a0829.js"><link rel="prefetch" href="/web-javascript/assets/js/108.5ce1cffd.js"><link rel="prefetch" href="/web-javascript/assets/js/109.ff201df3.js"><link rel="prefetch" href="/web-javascript/assets/js/11.4bc148a1.js"><link rel="prefetch" href="/web-javascript/assets/js/110.c60e9349.js"><link rel="prefetch" href="/web-javascript/assets/js/111.6c21e5e7.js"><link rel="prefetch" href="/web-javascript/assets/js/112.25668345.js"><link rel="prefetch" href="/web-javascript/assets/js/113.2d603055.js"><link rel="prefetch" href="/web-javascript/assets/js/114.8ed3cc0c.js"><link rel="prefetch" href="/web-javascript/assets/js/115.25dcf12a.js"><link rel="prefetch" href="/web-javascript/assets/js/116.33c49635.js"><link rel="prefetch" href="/web-javascript/assets/js/117.25f01f37.js"><link rel="prefetch" href="/web-javascript/assets/js/118.3589e8da.js"><link rel="prefetch" href="/web-javascript/assets/js/119.e7457b1c.js"><link rel="prefetch" href="/web-javascript/assets/js/12.146b2fd9.js"><link rel="prefetch" href="/web-javascript/assets/js/120.cf1d25f3.js"><link rel="prefetch" href="/web-javascript/assets/js/121.e9fb9eed.js"><link rel="prefetch" href="/web-javascript/assets/js/122.5d1f9309.js"><link rel="prefetch" href="/web-javascript/assets/js/123.e5e1ce93.js"><link rel="prefetch" href="/web-javascript/assets/js/124.3ef4e9fc.js"><link rel="prefetch" href="/web-javascript/assets/js/125.08cb618d.js"><link rel="prefetch" href="/web-javascript/assets/js/126.39ce8fea.js"><link rel="prefetch" href="/web-javascript/assets/js/127.3891c201.js"><link rel="prefetch" href="/web-javascript/assets/js/128.35292750.js"><link rel="prefetch" href="/web-javascript/assets/js/129.45755f63.js"><link rel="prefetch" href="/web-javascript/assets/js/13.750ce4ee.js"><link rel="prefetch" href="/web-javascript/assets/js/130.6abb9efd.js"><link rel="prefetch" href="/web-javascript/assets/js/131.b2c85dfd.js"><link rel="prefetch" href="/web-javascript/assets/js/132.6a9e6631.js"><link rel="prefetch" href="/web-javascript/assets/js/133.fafc778c.js"><link rel="prefetch" href="/web-javascript/assets/js/134.3447d412.js"><link rel="prefetch" href="/web-javascript/assets/js/135.53b56f12.js"><link rel="prefetch" href="/web-javascript/assets/js/136.bb592e50.js"><link rel="prefetch" href="/web-javascript/assets/js/137.71a12aff.js"><link rel="prefetch" href="/web-javascript/assets/js/138.b47f2f8b.js"><link rel="prefetch" href="/web-javascript/assets/js/139.c3cb1f62.js"><link rel="prefetch" href="/web-javascript/assets/js/14.1d231775.js"><link rel="prefetch" href="/web-javascript/assets/js/140.8560c2b9.js"><link rel="prefetch" href="/web-javascript/assets/js/141.cad52bea.js"><link rel="prefetch" href="/web-javascript/assets/js/142.1dda2adf.js"><link rel="prefetch" href="/web-javascript/assets/js/143.5a0ddab2.js"><link rel="prefetch" href="/web-javascript/assets/js/144.c222e0cc.js"><link rel="prefetch" href="/web-javascript/assets/js/145.5e0206f0.js"><link rel="prefetch" href="/web-javascript/assets/js/146.8a9d44ab.js"><link rel="prefetch" href="/web-javascript/assets/js/147.68616caa.js"><link rel="prefetch" href="/web-javascript/assets/js/148.083f5c0a.js"><link rel="prefetch" href="/web-javascript/assets/js/149.4a79adb2.js"><link rel="prefetch" href="/web-javascript/assets/js/15.63510516.js"><link rel="prefetch" href="/web-javascript/assets/js/150.24f48bc4.js"><link rel="prefetch" href="/web-javascript/assets/js/151.6b79bb0f.js"><link rel="prefetch" href="/web-javascript/assets/js/152.07833aa2.js"><link rel="prefetch" href="/web-javascript/assets/js/153.3b13c641.js"><link rel="prefetch" href="/web-javascript/assets/js/154.6ffe4907.js"><link rel="prefetch" href="/web-javascript/assets/js/155.d47d3dde.js"><link rel="prefetch" href="/web-javascript/assets/js/156.1883a0aa.js"><link rel="prefetch" href="/web-javascript/assets/js/157.028a96bd.js"><link rel="prefetch" href="/web-javascript/assets/js/158.e3eb876a.js"><link rel="prefetch" href="/web-javascript/assets/js/159.2f2db222.js"><link rel="prefetch" href="/web-javascript/assets/js/16.81784f4b.js"><link rel="prefetch" href="/web-javascript/assets/js/160.2dc50048.js"><link rel="prefetch" href="/web-javascript/assets/js/161.766f3adf.js"><link rel="prefetch" href="/web-javascript/assets/js/162.73827d68.js"><link rel="prefetch" href="/web-javascript/assets/js/163.6b44308f.js"><link rel="prefetch" href="/web-javascript/assets/js/164.6fbf3723.js"><link rel="prefetch" href="/web-javascript/assets/js/165.17cfa786.js"><link rel="prefetch" href="/web-javascript/assets/js/166.e9193c2f.js"><link rel="prefetch" href="/web-javascript/assets/js/167.3172d15b.js"><link rel="prefetch" href="/web-javascript/assets/js/168.9b0a089c.js"><link rel="prefetch" href="/web-javascript/assets/js/169.f7bdffee.js"><link rel="prefetch" href="/web-javascript/assets/js/17.d22eeb91.js"><link rel="prefetch" href="/web-javascript/assets/js/170.250f4147.js"><link rel="prefetch" href="/web-javascript/assets/js/171.8b3b888c.js"><link rel="prefetch" href="/web-javascript/assets/js/172.74cb4d80.js"><link rel="prefetch" href="/web-javascript/assets/js/173.51b459b6.js"><link rel="prefetch" href="/web-javascript/assets/js/174.8257a8dc.js"><link rel="prefetch" href="/web-javascript/assets/js/175.f9f02b48.js"><link rel="prefetch" href="/web-javascript/assets/js/176.1c2288fd.js"><link rel="prefetch" href="/web-javascript/assets/js/177.bf39f4ef.js"><link rel="prefetch" href="/web-javascript/assets/js/178.d7348239.js"><link rel="prefetch" href="/web-javascript/assets/js/179.e9b8d4b9.js"><link rel="prefetch" href="/web-javascript/assets/js/18.4f5fde73.js"><link rel="prefetch" href="/web-javascript/assets/js/180.e6f30fba.js"><link rel="prefetch" href="/web-javascript/assets/js/181.5a2f47dd.js"><link rel="prefetch" href="/web-javascript/assets/js/182.320b35b4.js"><link rel="prefetch" href="/web-javascript/assets/js/183.4033bdfe.js"><link rel="prefetch" href="/web-javascript/assets/js/184.4a603b01.js"><link rel="prefetch" href="/web-javascript/assets/js/185.f9acf20e.js"><link rel="prefetch" href="/web-javascript/assets/js/186.eef3e44d.js"><link rel="prefetch" href="/web-javascript/assets/js/187.1987b45d.js"><link rel="prefetch" href="/web-javascript/assets/js/188.3c166483.js"><link rel="prefetch" href="/web-javascript/assets/js/189.5a39c173.js"><link rel="prefetch" href="/web-javascript/assets/js/19.1319631a.js"><link rel="prefetch" href="/web-javascript/assets/js/190.7205d249.js"><link rel="prefetch" href="/web-javascript/assets/js/191.b46bb844.js"><link rel="prefetch" href="/web-javascript/assets/js/192.63a754e7.js"><link rel="prefetch" href="/web-javascript/assets/js/193.1e921039.js"><link rel="prefetch" href="/web-javascript/assets/js/20.3a56a984.js"><link rel="prefetch" href="/web-javascript/assets/js/21.54ab1ae8.js"><link rel="prefetch" href="/web-javascript/assets/js/22.2f58c1fa.js"><link rel="prefetch" href="/web-javascript/assets/js/23.7155ac9b.js"><link rel="prefetch" href="/web-javascript/assets/js/24.a3907dea.js"><link rel="prefetch" href="/web-javascript/assets/js/25.42354659.js"><link rel="prefetch" href="/web-javascript/assets/js/26.e5b46d0f.js"><link rel="prefetch" href="/web-javascript/assets/js/27.50e2045b.js"><link rel="prefetch" href="/web-javascript/assets/js/28.47ebb86f.js"><link rel="prefetch" href="/web-javascript/assets/js/29.4fa5f570.js"><link rel="prefetch" href="/web-javascript/assets/js/30.6bf4c79b.js"><link rel="prefetch" href="/web-javascript/assets/js/31.344b317b.js"><link rel="prefetch" href="/web-javascript/assets/js/32.071c4013.js"><link rel="prefetch" href="/web-javascript/assets/js/33.6faae56f.js"><link rel="prefetch" href="/web-javascript/assets/js/34.63cf7d2a.js"><link rel="prefetch" href="/web-javascript/assets/js/35.ae84bc37.js"><link rel="prefetch" href="/web-javascript/assets/js/36.ff149ea0.js"><link rel="prefetch" href="/web-javascript/assets/js/37.00ff46fd.js"><link rel="prefetch" href="/web-javascript/assets/js/38.a3199d1f.js"><link rel="prefetch" href="/web-javascript/assets/js/39.1518f094.js"><link rel="prefetch" href="/web-javascript/assets/js/4.f75a6751.js"><link rel="prefetch" href="/web-javascript/assets/js/40.a860f82b.js"><link rel="prefetch" href="/web-javascript/assets/js/41.2c4b6912.js"><link rel="prefetch" href="/web-javascript/assets/js/42.de30824f.js"><link rel="prefetch" href="/web-javascript/assets/js/43.029a9e7a.js"><link rel="prefetch" href="/web-javascript/assets/js/44.95bfa1f4.js"><link rel="prefetch" href="/web-javascript/assets/js/45.74b3d941.js"><link rel="prefetch" href="/web-javascript/assets/js/46.89211acd.js"><link rel="prefetch" href="/web-javascript/assets/js/47.5276c351.js"><link rel="prefetch" href="/web-javascript/assets/js/48.1edc97da.js"><link rel="prefetch" href="/web-javascript/assets/js/49.8a61149f.js"><link rel="prefetch" href="/web-javascript/assets/js/5.792aefb7.js"><link rel="prefetch" href="/web-javascript/assets/js/50.18f2e341.js"><link rel="prefetch" href="/web-javascript/assets/js/51.13272cd6.js"><link rel="prefetch" href="/web-javascript/assets/js/52.6599f277.js"><link rel="prefetch" href="/web-javascript/assets/js/53.9f3788aa.js"><link rel="prefetch" href="/web-javascript/assets/js/54.9639df49.js"><link rel="prefetch" href="/web-javascript/assets/js/55.26a0791f.js"><link rel="prefetch" href="/web-javascript/assets/js/56.fc6f6bbf.js"><link rel="prefetch" href="/web-javascript/assets/js/57.66b4d299.js"><link rel="prefetch" href="/web-javascript/assets/js/58.122b01eb.js"><link rel="prefetch" href="/web-javascript/assets/js/59.8bc2adb2.js"><link rel="prefetch" href="/web-javascript/assets/js/60.98a70eb5.js"><link rel="prefetch" href="/web-javascript/assets/js/61.ec09cc1c.js"><link rel="prefetch" href="/web-javascript/assets/js/62.3ed27c6a.js"><link rel="prefetch" href="/web-javascript/assets/js/63.a0a45444.js"><link rel="prefetch" href="/web-javascript/assets/js/64.592c07a5.js"><link rel="prefetch" href="/web-javascript/assets/js/65.49e82a59.js"><link rel="prefetch" href="/web-javascript/assets/js/66.4614414f.js"><link rel="prefetch" href="/web-javascript/assets/js/67.410dd42c.js"><link rel="prefetch" href="/web-javascript/assets/js/68.41e825ac.js"><link rel="prefetch" href="/web-javascript/assets/js/69.7d649fe3.js"><link rel="prefetch" href="/web-javascript/assets/js/7.afa77f40.js"><link rel="prefetch" href="/web-javascript/assets/js/70.ec01c718.js"><link rel="prefetch" href="/web-javascript/assets/js/71.5912de27.js"><link rel="prefetch" href="/web-javascript/assets/js/72.09d701ec.js"><link rel="prefetch" href="/web-javascript/assets/js/73.62f0477e.js"><link rel="prefetch" href="/web-javascript/assets/js/74.0fa6a06d.js"><link rel="prefetch" href="/web-javascript/assets/js/75.4e525fde.js"><link rel="prefetch" href="/web-javascript/assets/js/76.ab65ce02.js"><link rel="prefetch" href="/web-javascript/assets/js/77.469a47eb.js"><link rel="prefetch" href="/web-javascript/assets/js/78.151421e2.js"><link rel="prefetch" href="/web-javascript/assets/js/79.df8902e1.js"><link rel="prefetch" href="/web-javascript/assets/js/8.49b39b40.js"><link rel="prefetch" href="/web-javascript/assets/js/80.78037ac8.js"><link rel="prefetch" href="/web-javascript/assets/js/81.dbe0db3d.js"><link rel="prefetch" href="/web-javascript/assets/js/82.e4fcf364.js"><link rel="prefetch" href="/web-javascript/assets/js/83.2b4ca871.js"><link rel="prefetch" href="/web-javascript/assets/js/84.eac30818.js"><link rel="prefetch" href="/web-javascript/assets/js/85.e8cff7c8.js"><link rel="prefetch" href="/web-javascript/assets/js/86.3b01f706.js"><link rel="prefetch" href="/web-javascript/assets/js/87.38afa402.js"><link rel="prefetch" href="/web-javascript/assets/js/88.fb28a19d.js"><link rel="prefetch" href="/web-javascript/assets/js/89.b4e3465d.js"><link rel="prefetch" href="/web-javascript/assets/js/9.a6ec67f3.js"><link rel="prefetch" href="/web-javascript/assets/js/90.d969980b.js"><link rel="prefetch" href="/web-javascript/assets/js/91.09175279.js"><link rel="prefetch" href="/web-javascript/assets/js/92.97e2cdca.js"><link rel="prefetch" href="/web-javascript/assets/js/93.8be5b7db.js"><link rel="prefetch" href="/web-javascript/assets/js/94.045a49d3.js"><link rel="prefetch" href="/web-javascript/assets/js/95.a9ed630c.js"><link rel="prefetch" href="/web-javascript/assets/js/96.93567097.js"><link rel="prefetch" href="/web-javascript/assets/js/97.abae11f5.js"><link rel="prefetch" href="/web-javascript/assets/js/98.e6101b3e.js"><link rel="prefetch" href="/web-javascript/assets/js/99.e9e3b936.js"><link rel="prefetch" href="/web-javascript/assets/js/vendors~flowchart.ed6a2ace.js">
    <link rel="stylesheet" href="/web-javascript/assets/css/0.styles.b166fd3a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/web-javascript/" class="home-link router-link-active"><!----> <span class="site-name">JavaScript学习笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><span class="title">基础知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础知识" class="mobile-dropdown-title"><span class="title">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-javascript/1.base/1.ECMAScript/1.index.html" class="nav-link">
  一.ECMAScript
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/1.base/2.ECMAScript6/1.index.html" class="nav-link">
  二.ECMAScript6
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/1.base/3.JavaScript/1.index.html" class="nav-link">
  三.JavaScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中级知识" class="dropdown-title"><span class="title">中级知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="中级知识" class="mobile-dropdown-title"><span class="title">中级知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-javascript/2.advanced/2.js/1.index.html" class="nav-link">
  一.运行机制
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/2.advanced/3.type/1.index.html" class="nav-link">
  二.数据类型
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="专项知识" class="dropdown-title"><span class="title">专项知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="专项知识" class="mobile-dropdown-title"><span class="title">专项知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-javascript/3.senior/2.design/1.index.html" class="nav-link">
  一.设计模式
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/3.senior/5.optimize/1.index.html" class="nav-link">
  二.性能优化
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/3.senior/6.debugger/1.index.html" class="nav-link">
  三.前端调试
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/3.senior/7.cross/1.index.html" class="nav-link">
  四.跨域方式
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript引擎" class="dropdown-title"><span class="title">JavaScript引擎</span> <span class="arrow down"></span></button> <button type="button" aria-label="JavaScript引擎" class="mobile-dropdown-title"><span class="title">JavaScript引擎</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-javascript/6.source/1.promise/1.index.html" class="nav-link">
  一.JavaScriptCore
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/6.source/browser/1.index.html" class="nav-link">
  二.V8
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/6.source/api/1.index.html" class="nav-link">
  三.SpiderMonkey
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端工程化" class="dropdown-title"><span class="title">前端工程化</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端工程化" class="mobile-dropdown-title"><span class="title">前端工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-javascript/4.special/1.cli/1.index.html" class="nav-link">
  一.工程化基础
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/4.special/3.dev/1.index.html" class="nav-link">
  三.开发
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/4.special/4.construct/1.index.html" class="nav-link">
  四.构建
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/4.special/5.project/1.index.html" class="nav-link">
  五.开发流程
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/4.special/5.standard/1.index.html" class="nav-link">
  五.代码规范
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/4.special/6.test/1.index.html" class="nav-link">
  六.前端测试
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/4.special/7.cicd/1.index.html" class="nav-link">
  七.CI/CD
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="书籍资料" class="dropdown-title"><span class="title">书籍资料</span> <span class="arrow down"></span></button> <button type="button" aria-label="书籍资料" class="mobile-dropdown-title"><span class="title">书籍资料</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-javascript/7.read/book1/1.index.html" class="nav-link">
  一.《JavaScript高级程序设计（第4版）》
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/7.read/book2/1.index.html" class="nav-link">
  二.《JavaScript DOM编程艺术》
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/7.read/book3/1.index.html" class="nav-link">
  三.《你不知道的JavaScript》
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/7.read/book4/1.index.html" class="nav-link">
  四.《JavaScript设计模式与开发实践》
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/7.read/book5/1.index.html" class="nav-link">
  五.《高性能JavaScript》
</a></li></ul></div></div> <a href="https://gitee.com/zhoubichuan/web-javascript" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><span class="title">基础知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础知识" class="mobile-dropdown-title"><span class="title">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-javascript/1.base/1.ECMAScript/1.index.html" class="nav-link">
  一.ECMAScript
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/1.base/2.ECMAScript6/1.index.html" class="nav-link">
  二.ECMAScript6
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/1.base/3.JavaScript/1.index.html" class="nav-link">
  三.JavaScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中级知识" class="dropdown-title"><span class="title">中级知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="中级知识" class="mobile-dropdown-title"><span class="title">中级知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-javascript/2.advanced/2.js/1.index.html" class="nav-link">
  一.运行机制
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/2.advanced/3.type/1.index.html" class="nav-link">
  二.数据类型
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="专项知识" class="dropdown-title"><span class="title">专项知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="专项知识" class="mobile-dropdown-title"><span class="title">专项知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-javascript/3.senior/2.design/1.index.html" class="nav-link">
  一.设计模式
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/3.senior/5.optimize/1.index.html" class="nav-link">
  二.性能优化
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/3.senior/6.debugger/1.index.html" class="nav-link">
  三.前端调试
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/3.senior/7.cross/1.index.html" class="nav-link">
  四.跨域方式
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript引擎" class="dropdown-title"><span class="title">JavaScript引擎</span> <span class="arrow down"></span></button> <button type="button" aria-label="JavaScript引擎" class="mobile-dropdown-title"><span class="title">JavaScript引擎</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-javascript/6.source/1.promise/1.index.html" class="nav-link">
  一.JavaScriptCore
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/6.source/browser/1.index.html" class="nav-link">
  二.V8
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/6.source/api/1.index.html" class="nav-link">
  三.SpiderMonkey
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端工程化" class="dropdown-title"><span class="title">前端工程化</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端工程化" class="mobile-dropdown-title"><span class="title">前端工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-javascript/4.special/1.cli/1.index.html" class="nav-link">
  一.工程化基础
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/4.special/3.dev/1.index.html" class="nav-link">
  三.开发
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/4.special/4.construct/1.index.html" class="nav-link">
  四.构建
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/4.special/5.project/1.index.html" class="nav-link">
  五.开发流程
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/4.special/5.standard/1.index.html" class="nav-link">
  五.代码规范
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/4.special/6.test/1.index.html" class="nav-link">
  六.前端测试
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/4.special/7.cicd/1.index.html" class="nav-link">
  七.CI/CD
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="书籍资料" class="dropdown-title"><span class="title">书籍资料</span> <span class="arrow down"></span></button> <button type="button" aria-label="书籍资料" class="mobile-dropdown-title"><span class="title">书籍资料</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-javascript/7.read/book1/1.index.html" class="nav-link">
  一.《JavaScript高级程序设计（第4版）》
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/7.read/book2/1.index.html" class="nav-link">
  二.《JavaScript DOM编程艺术》
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/7.read/book3/1.index.html" class="nav-link">
  三.《你不知道的JavaScript》
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/7.read/book4/1.index.html" class="nav-link">
  四.《JavaScript设计模式与开发实践》
</a></li><li class="dropdown-item"><!----> <a href="/web-javascript/7.read/book5/1.index.html" class="nav-link">
  五.《高性能JavaScript》
</a></li></ul></div></div> <a href="https://gitee.com/zhoubichuan/web-javascript" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/web-javascript/3.senior/5.optimize/1.index.html" class="sidebar-link">性能优化</a></li><li><a href="/web-javascript/3.senior/5.optimize/1.cdn.html" class="sidebar-link">一.CDN</a></li><li><a href="/web-javascript/3.senior/5.optimize/2.canvas.html" class="sidebar-link">二.Canvas</a></li><li><a href="/web-javascript/3.senior/5.optimize/3.store.html" class="sidebar-link">三.本地存储</a></li><li><a href="/web-javascript/3.senior/5.optimize/4.img.html" aria-current="page" class="active sidebar-link">四.图片优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-javascript/3.senior/5.optimize/4.img.html#_1-jpeg-jpg" class="sidebar-link">1.JPEG/JPG</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-javascript/3.senior/5.optimize/4.img.html#_1-1-优点" class="sidebar-link">1.1 优点</a></li><li class="sidebar-sub-header"><a href="/web-javascript/3.senior/5.optimize/4.img.html#_1-2-使用场景" class="sidebar-link">1.2 使用场景</a></li><li class="sidebar-sub-header"><a href="/web-javascript/3.senior/5.optimize/4.img.html#_1-3-缺陷" class="sidebar-link">1.3 缺陷</a></li></ul></li><li class="sidebar-sub-header"><a href="/web-javascript/3.senior/5.optimize/4.img.html#_2-png-8-与-png-24" class="sidebar-link">2.PNG-8 与 PNG-24</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-javascript/3.senior/5.optimize/4.img.html#_2-1-优点" class="sidebar-link">2.1 优点</a></li><li class="sidebar-sub-header"><a href="/web-javascript/3.senior/5.optimize/4.img.html#_2-2-png-8-与-png-24-的选择题" class="sidebar-link">2.2 PNG-8 与 PNG-24 的选择题</a></li><li class="sidebar-sub-header"><a href="/web-javascript/3.senior/5.optimize/4.img.html#_2-3-应用场景" class="sidebar-link">2.3 应用场景</a></li></ul></li><li class="sidebar-sub-header"><a href="/web-javascript/3.senior/5.optimize/4.img.html#_3-svg" class="sidebar-link">3.SVG</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-javascript/3.senior/5.optimize/4.img.html#_3-1-特性" class="sidebar-link">3.1 特性</a></li><li class="sidebar-sub-header"><a href="/web-javascript/3.senior/5.optimize/4.img.html#_3-2-应用场景" class="sidebar-link">3.2 应用场景</a></li></ul></li><li class="sidebar-sub-header"><a href="/web-javascript/3.senior/5.optimize/4.img.html#_4-base64" class="sidebar-link">4.Base64</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-javascript/3.senior/5.optimize/4.img.html#_4-1-理解-base64" class="sidebar-link">4.1 理解 Base64</a></li><li class="sidebar-sub-header"><a href="/web-javascript/3.senior/5.optimize/4.img.html#_4-2-应用场景" class="sidebar-link">4.2 应用场景</a></li><li class="sidebar-sub-header"><a href="/web-javascript/3.senior/5.optimize/4.img.html#_4-3-工具推荐" class="sidebar-link">4.3 工具推荐</a></li></ul></li><li class="sidebar-sub-header"><a href="/web-javascript/3.senior/5.optimize/4.img.html#_5-webp" class="sidebar-link">5.WebP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-javascript/3.senior/5.optimize/4.img.html#_5-1-优点" class="sidebar-link">5.1 优点</a></li><li class="sidebar-sub-header"><a href="/web-javascript/3.senior/5.optimize/4.img.html#_5-2-缺点" class="sidebar-link">5.2 缺点</a></li><li class="sidebar-sub-header"><a href="/web-javascript/3.senior/5.optimize/4.img.html#_5-3-应用场景" class="sidebar-link">5.3 应用场景</a></li></ul></li></ul></li><li><a href="/web-javascript/3.senior/5.optimize/5.api.html" class="sidebar-link">五.性能监测</a></li><li><a href="/web-javascript/3.senior/5.optimize/6.form.html" class="sidebar-link">六.回流与重绘</a></li><li><a href="/web-javascript/3.senior/5.optimize/7.seo.html" class="sidebar-link">七.seo</a></li><li><a href="/web-javascript/3.senior/5.optimize/9.lazy.html" class="sidebar-link">九.优化首屏体验</a></li><li><a href="/web-javascript/3.senior/5.optimize/10.ssr.html" class="sidebar-link">十.服务端渲染</a></li><li><a href="/web-javascript/3.senior/5.optimize/11.debounceAndThrottle.html" class="sidebar-link">十一.节流与防抖</a></li><li><a href="/web-javascript/3.senior/5.optimize/12.webpack.html" class="sidebar-link">十二.webpack 性能调优</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="四-图片优化"><a href="#四-图片优化" class="header-anchor">#</a> 四.图片优化</h1> <div class="custom-block tip"><p class="custom-block-title">前言</p> <p>就图片这块来说，与其说是在做“优化”，不如说是在做“权衡”。因为我们要做的事情，就是去压缩图片的体积（或者一开始就选取体积较小的图片格式）。但这个优化操作，是以牺牲一部分成像质量为代价的。因此我们的主要任务，是尽可能地去寻求一个质量与性能之间的平衡点。</p></div> <ul><li>不同业务场景下的图片方案选型</li></ul> <p>时下应用较为广泛的 Web 图片格式有 JPEG/JPG、PNG、WebP、Base64、SVG 等，这些格式都是很有故事的，值得我们好好研究一把。此外，老生常谈的雪碧图（CSS Sprites）至今也仍在一线的前端应用中发光发热，我们也会有所提及。</p> <div class="custom-block warning"><p class="custom-block-title">二进制位数与色彩的关系</p> <p>在计算机中，像素用二进制数来表示。不同的图片格式中像素与二进制位数之间的对应关系是不同的。一个像素对应的二进制位数越多，它可以表示的颜色种类就越多，成像效果也就越细腻，文件体积相应也会越大。</p> <p>一个二进制位表示两种颜色（0|1 对应黑|白），如果一种图片格式对应的二进制位数有 n 个，那么它就可以呈现 2^n 种颜色。</p></div> <h2 id="_1-jpeg-jpg"><a href="#_1-jpeg-jpg" class="header-anchor">#</a> 1.JPEG/JPG</h2> <p>关键字：<strong>有损压缩、体积小、加载快、不支持透明</strong></p> <h3 id="_1-1-优点"><a href="#_1-1-优点" class="header-anchor">#</a> 1.1 优点</h3> <p>JPG 最大的特点是<strong>有损压缩</strong>。这种高效的压缩算法使它成为了一种非常轻巧的图片格式。另一方面，即使被称为“有损”压缩，JPG 的压缩方式仍然是一种高质量的压缩方式：当我们把图片体积压缩至原有体积的 50% 以下时，JPG 仍然可以保持住 60% 的品质。此外，JPG 格式以 24 位存储单个图，可以呈现多达 1600 万种颜色，足以应对大多数场景下对色彩的要求，这一点决定了它压缩前后的质量损耗并不容易被我们人类的肉眼所察觉——前提是你用对了业务场景。</p> <h3 id="_1-2-使用场景"><a href="#_1-2-使用场景" class="header-anchor">#</a> 1.2 使用场景</h3> <p>JPG 适用于呈现色彩丰富的图片，在我们日常开发中，JPG 图片经常作为大的背景图、轮播图或 Banner 图出现。</p> <p>两大电商网站对大图的处理，是 JPG 图片应用场景的最佳写照</p> <p>打开淘宝首页，我们可以发现页面中最醒目、最庞大的图片，一定是以 .jpg 为后缀的</p> <p>使用 JPG 呈现大图，既可以保住图片的质量，又不会带来令人头疼的图片体积，是当下比较推崇的一种方案。</p> <h3 id="_1-3-缺陷"><a href="#_1-3-缺陷" class="header-anchor">#</a> 1.3 缺陷</h3> <p>有损压缩在上文所展示的轮播图上确实很难露出马脚，但当它处理<strong>矢量图形</strong>和 <strong>Logo</strong> 等线条感较强、颜色对比强烈的图像时，人为压缩导致的图片模糊会相当明显。</p> <p>此外，JPEG 图像<strong>不支持透明度处理</strong>，透明图片需要召唤 PNG 来呈现。</p> <h2 id="_2-png-8-与-png-24"><a href="#_2-png-8-与-png-24" class="header-anchor">#</a> 2.PNG-8 与 PNG-24</h2> <p>关键字：<strong>无损压缩、质量高、体积大、支持透明</strong></p> <h3 id="_2-1-优点"><a href="#_2-1-优点" class="header-anchor">#</a> 2.1 优点</h3> <p>PNG（可移植网络图形格式）是一种无损压缩的高保真的图片格式。8 和 24，这里都是二进制数的位数。按照我们前置知识里提到的对应关系，8 位的 PNG 最多支持 256 种颜色，而 24 位的可以呈现约 1600 万种颜色。</p> <p>PNG 图片具有比 JPG 更强的色彩表现力，对线条的处理更加细腻，对透明度有良好的支持。它弥补了上文我们提到的 JPG 的局限性，唯一的 BUG 就是<strong>体积太大</strong>。</p> <h3 id="_2-2-png-8-与-png-24-的选择题"><a href="#_2-2-png-8-与-png-24-的选择题" class="header-anchor">#</a> 2.2 PNG-8 与 PNG-24 的选择题</h3> <p>什么时候用 PNG-8，什么时候用 PNG-24，这是一个问题。</p> <p>理论上来说，当你追求最佳的显示效果、并且不在意文件体积大小时，是推荐使用 PNG-24 的。</p> <p>但实践当中，为了规避体积的问题，我们一般不用 PNG 去处理较复杂的图像。当我们遇到适合 PNG 的场景时，也会优先选择更为小巧的 PNG-8。</p> <p>如何确定一张图片是该用 PNG-8 还是 PNG-24 去呈现呢？好的做法是把图片先按照这两种格式分别输出，看 PNG-8 输出的结果是否会带来肉眼可见的质量损耗，并且确认这种损耗是否在我们（尤其是你的 UI 设计师）可接受的范围内，基于对比的结果去做判断。</p> <h3 id="_2-3-应用场景"><a href="#_2-3-应用场景" class="header-anchor">#</a> 2.3 应用场景</h3> <p>前面我们提到，复杂的、色彩层次丰富的图片，用 PNG 来处理的话，成本会比较高，我们一般会交给 JPG 去存储。</p> <p>考虑到 PNG 在处理线条和颜色对比度方面的优势，我们主要用它来呈现小的 Logo、颜色简单且对比强烈的图片或背景等。</p> <p>此时我们再次把目光转向性能方面堪称业界楷模的淘宝首页，我们会发现它页面上的 Logo，无论大小，还真的都是 PNG 格式</p> <p>颜色简单、对比度较强的透明小图也在 PNG 格式下有着良好的表现</p> <h2 id="_3-svg"><a href="#_3-svg" class="header-anchor">#</a> 3.SVG</h2> <p>关键字：<strong>文本文件、体积小、不失真、兼容性好</strong></p> <p>SVG（可缩放矢量图形）是一种基于 XML 语法的图像格式。它和本文提及的其它图片种类有着本质的不同：SVG 对图像的处理不是基于像素点，而是是基于对图像的形状描述。</p> <h3 id="_3-1-特性"><a href="#_3-1-特性" class="header-anchor">#</a> 3.1 特性</h3> <p>和性能关系最密切的一点就是：SVG 与 PNG 和 JPG 相比，<strong>文件体积更小，可压缩性更强</strong>。</p> <p>当然，作为矢量图，它最显著的优势还是在于<strong>图片可无限放大而不失真</strong>这一点上。这使得 SVG 即使是被放到视网膜屏幕上，也可以一如既往地展现出较好的成像品质——1 张 SVG 足以适配 n 种分辨率。</p> <p>此外，<strong>SVG 是文本文件</strong>。我们既可以像写代码一样定义 SVG，把它写在 HTML 里、成为 DOM 的一部分，也可以把对图形的描述写入以 .svg 为后缀的独立文件（SVG 文件在使用上与普通图片文件无异）。这使得 SVG 文件可以被非常多的工具读取和修改，具有较强的<strong>灵活性</strong>。</p> <p>SVG 的局限性主要有两个方面，一方面是它的渲染成本比较高，这点对性能来说是很不利的。另一方面，SVG 存在着其它图片格式所没有的学习成本（它是可编程的）。</p> <h3 id="_3-2-应用场景"><a href="#_3-2-应用场景" class="header-anchor">#</a> 3.2 应用场景</h3> <p>SVG 是文本文件，我们既可以像写代码一样定义 SVG，把它写在 HTML 里、成为 DOM 的一部分，也可以把对图形的描述写入以 .svg 为后缀的独立文件（SVG 文件在使用上与普通图片文件无异）。</p> <ul><li><p>将 SVG 写入 HTML：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;en&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>svg xmlns<span class="token operator">=</span><span class="token string">&quot;http://www.w3.org/2000/svg&quot;</span>   width<span class="token operator">=</span><span class="token string">&quot;200&quot;</span> height<span class="token operator">=</span><span class="token string">&quot;200&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>circle cx<span class="token operator">=</span><span class="token string">&quot;50&quot;</span> cy<span class="token operator">=</span><span class="token string">&quot;50&quot;</span> r<span class="token operator">=</span><span class="token string">&quot;50&quot;</span> <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>circle<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>svg<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li> <li><p>将 SVG 写入独立文件后引入 HTML:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>文件名.svg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <p>在实际开发中，我们更多用到的是后者。很多情况下设计师会给到我们 SVG 文件，就算没有设计师，我们还有非常好用的 <a href="http://www.iconfont.cn/" target="_blank" rel="noopener noreferrer">在线矢量图形库<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。对于矢量图，我们无须深究过多，只需要对其核心特性有所掌握、日后在应用时做到有迹可循即可。</p> <h2 id="_4-base64"><a href="#_4-base64" class="header-anchor">#</a> 4.Base64</h2> <p>关键字：<strong>文本文件、依赖编码、小图标解决方案</strong></p> <p>Base64 并非一种图片格式，而是一种编码方式。Base64 和雪碧图一样，是作为小图标解决方案而存在的。</p> <div class="custom-block tip"><p class="custom-block-title">雪碧图（CSS Sprites）</p> <p>雪碧图、CSS 精灵、CSS Sprites、图像精灵，说的都是这个东西——一种将小图标和背景图像合并到一张图片上，然后利用 CSS 的背景定位来显示其中的每一部分的技术。</p> <p>MDN 对雪碧图的解释已经非常到位：</p> <blockquote><p>图像精灵（sprite，意为精灵），被运用于众多使用大量小图标的网页应用之上。它可取图像的一部分来使用，使得使用一个图像文件替代多个小文件成为可能。相较于一个小图标一个图像文件，单独一张图片所需的 HTTP 请求更少，对内存和带宽更加友好。</p></blockquote> <p>和雪碧图一样，Base64 图片的出现，也是为了减少加载网页图片时对服务器的请求次数，从而提升网页性能。<strong>Base64 是作为雪碧图的补充而存在的。</strong></p></div> <h3 id="_4-1-理解-base64"><a href="#_4-1-理解-base64" class="header-anchor">#</a> 4.1 理解 Base64</h3> <p>通过我们上文的演示，大家不难看出，每次加载图片，都是需要单独向服务器请求这个图片对应的资源的——这也就意味着一次 HTTP 请求的开销。
<strong>Base64 是一种用于传输 8Bit 字节码的编码方式，通过对图片进行 Base64 编码，我们可以直接将编码结果写入 HTML 或者写入 CSS，从而减少 HTTP 请求的次数。</strong></p> <p>我们来一起看一个实例，现在我有这么一个小小的放大镜 Logo：</p> <p>它对应的链接如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>user<span class="token operator">-</span>gold<span class="token operator">-</span>cdn<span class="token punctuation">.</span>xitu<span class="token punctuation">.</span>io<span class="token operator">/</span><span class="token number">2018</span><span class="token operator">/</span><span class="token number">9</span><span class="token operator">/</span><span class="token number">15</span><span class="token operator">/</span>165db7e94699824b<span class="token operator">?</span>w<span class="token operator">=</span><span class="token number">22</span><span class="token operator">&amp;</span>h<span class="token operator">=</span><span class="token number">22</span><span class="token operator">&amp;</span>f<span class="token operator">=</span>png<span class="token operator">&amp;</span>s<span class="token operator">=</span><span class="token number">3680</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>按照一贯的思路，我们加载图片需要把图片链接写入 img 标签：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
  <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://user-gold-cdn.xitu.io/2018/9/15/165db7e94699824b?w=22&amp;h=22&amp;f=png&amp;s=3680<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>浏览器就会针对我们的图片链接去发起一个资源请求。</p> <p>但是如果我们对这个图片进行 Base64 编码，我们会得到一个这样的字符串：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">data</span><span class="token operator">:</span>image<span class="token operator">/</span>png<span class="token punctuation">;</span>base64<span class="token punctuation">,</span>iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAMJGlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU8kagOeWJCQktEAEpITeBCnSpdfQpQo2QhJIKDEkBBU7uqjgWlARwYquitjWAshiw14Wwd4fiKgo62LBhsqbFNDV89477z9n7v3yzz9<span class="token operator">/</span>mcydMwOAehxbJMpFNQDIExaI48MCmeNT05ikR4AECIAKRgEamyMRBcTFRQEoQ<span class="token operator">+</span><span class="token number">9</span><span class="token operator">/</span>yrubAJG9r9nLfP3c<span class="token operator">/</span>19Fk8uTcABA4iBncCWcPMiHAMDdOCJxAQCEXqg3m1YggkyEWQJtMUwQsrmMsxTsIeMMBUfJbRLjgyCnA6BCZbPFWQCoyfJiFnKyoB<span class="token operator">+</span>1pZAdhVyBEHIzZF8On82F<span class="token operator">/</span>BnyqLy8qZDVrSFbZ3znJ<span class="token operator">+</span>sfPjOGfbLZWcOsqEUuKsECiSiXPeP<span class="token operator">/</span>nI7<span class="token operator">/</span>LXm50qEYZrBR<span class="token operator">+</span>eLweFnNsnnLmRopYyrk88KMmFjIWpCvC7hyexk<span class="token operator">/</span>4UvDk5T2HziSIDhngAEASuWygyMhG0A2FebGRCn1vpmCUBZkOPdooqCAlagYi3LFU<span class="token operator">+</span><span class="token constant">OV</span><span class="token operator">/</span>tHpPElIwhCzxfJYMptSaU5SgNLnRj6PNeSzqYifmKLIE20rFCTHQFaDfF<span class="token operator">+</span>SkxCptHlexA<span class="token operator">+</span>KGbIRS<span class="token operator">+</span>NlOcP<span class="token operator">/</span>HAOZ4tB4hQ1mnicZqgvz4gtYMUqO4rDl<span class="token operator">+</span>ehCnlzATwxX<span class="token operator">+</span>MEKeZLxUUN5cnnBIYq6sGKeMEmZP1YuKgiMV47dJsqNU9pjzbzcMJneFHKrpDBhaGxfAVxsinpxICqIS1TkhmtnsyPiFHFxWxAFgkAwYAIpbBlgKsgGgtbehl74S9ETCthADLIAD9grNUMjUuQ9QvhMAEXgL0g8IBkeFyjv5YFCqP8yrFU87UGmvLdQPiIHPIGcByJBLvwtlY8SDkdLBo<span class="token operator">+</span>hRvBTdA7MNRc2Wd9POqb6kI4YQgwmhhNDiTa4Pu6Le<span class="token operator">+</span>NR8OkPmzPugXsO5fXNnvCE0E54RLhB6CDcmSIoFv<span class="token operator">+</span>QORNEgw6YY6iyuozvq8MtoVdXPBD3gf6hb5yB6wN7fAyMFID7wdiuUPt9rtLhir<span class="token operator">/</span>NpdIX2ZGMkkeQ<span class="token operator">/</span>cnWP2Ugm53v61fq1WzVXJV5ZQzPVtCw1Y9egr6bPy58R<span class="token operator">/</span>5oiS3GDmLnsJPYBawZawBM7DjWiF3Gjsp4eG08lq<span class="token operator">+</span>NoWjx8txyoB<span class="token operator">/</span><span class="token constant">BT</span><span class="token operator">/</span>HYypiyWZM41jn2OH5W9oEC3vQC2ccSNFU0QyzI4hcwA<span class="token operator">+</span>BuzWOyhByHUUxnRye4i8r2fsXW8oYh39MRxsVvuvwTAHiWQmXWNx0b7kFHngBAf<span class="token operator">/</span>dNZ<span class="token operator">/</span>YaLvsVABxt40jFhQodLnsQAAWowy9FDxjBvcsaVuQM3IA38AchIALEgkSQCibDOefDdSoG08AsMB<span class="token operator">+</span>UgDKwAqwBVWAT2Ap2gj3gAGgAzeAkOAsugTZwA9yDa6UbvAB94B0YQBCEhNAQOqKHGCMWiB3ijHggvkgIEoXEI6lIOpKFCBEpMgtZgJQh5UgVsgWpRX5HjiAnkQtIO3IH6UR6kNfIJxRDqag2aohaoqNRDzQAjUQT0UloFpqPFqEL0WVoJVqD7kbr0ZPoJfQG2oG<span class="token operator">+</span>QPsxgKliDMwEs8c8sCAsFkvDMjExNgcrxSqwGmwv1gT<span class="token operator">/</span>6WtYB9aLfcSJOB1n4vZwvYbjSTgHz8fn4EvxKnwnXo<span class="token operator">+</span>fxq<span class="token operator">/</span>hnXgf<span class="token operator">/</span>pVAIxgQ7AheBBZhPCGLMI1QQqggbCccJpyB30434R2RSGQQrYju8NtLJWYTZxKXEjcQ9xFPENuJXcR<span class="token operator">+</span>EomkR7Ij<span class="token operator">+</span>ZBiSWxSAamEtI60m3ScdJXUTfqgoqpirOKsEqqSpiJUKVapUNmlckzlqspTlQGyBtmC7EWOJXPJM8jLydvITeQr5G7yAEWTYkXxoSRSsinzKZWUvZQzlPuUN6qqqqaqnqrjVAWq81QrVfernlftVP1I1aLaUoOoE6lS6jLqDuoJ6h3qGxqNZknzp6XRCmjLaLW0U7SHtA9qdDUHNZYaV22uWrVavdpVtZfqZHUL9QD1yepF6hXqB9WvqPdqkDUsNYI02BpzNKo1jmjc0ujXpGs6acZq5mku1dyleUHzmRZJy1IrRIurtVBrq9YprS46RjejB9E59AX0bfQz9G5toraVNks7W7tMe492q3afjpbOGJ1knek61TpHdToYGMOSwWLkMpYzDjBuMj6NMBwRMII3YsmIvSOujnivO1LXX5enW6q7T<span class="token operator">/</span>eG7ic9pl6IXo7eSr0GvQf6uL6t<span class="token operator">/</span>jj9afob9c<span class="token operator">/</span>o947UHuk9kjOydOSBkXcNUANbg3iDmQZbDS4b9BsaGYYZigzXGZ4y7DViGPkbZRutNjpm1GNMN<span class="token operator">/</span>Y1FhivNj5u<span class="token operator">/</span>Jypwwxg5jIrmaeZfSYGJuEmUpMtJq0mA6ZWpkmmxab7TB<span class="token operator">+</span>YUcw8zDLNVpu1mPWZG5tHm88yrzO<span class="token operator">/</span>a0G28LDgW6y1OGfx3tLKMsVykWWD5TMrXSuWVZFVndV9a5q1n3W<span class="token operator">+</span>dY31dRuijYdNjs0GmzZb1NbVlm9bbXvFDrVzsxPYbbBrH0UY5TlKOKpm1C17qn2AfaF9nX2nA8MhyqHYocHh5Wjz0WmjV44<span class="token operator">+</span><span class="token constant">N</span><span class="token operator">/</span>qro6tjruM2x3tOWk4RTsVOTU6vnW2dOc7VztddaC6hLnNdGl1ejbEbwxuzccxtV7prtOsi1xbXL27ubmK3vW497ubu6e7r3W95aHvEeSz1OO9J8Az0nOvZ7PnRy82rwOuA19<span class="token operator">/</span>e9t453ru8n421Gssbu21sl4<span class="token operator">+</span>pD9tni0<span class="token operator">+</span>HL9M33Xezb4efiR<span class="token operator">/</span>br8bvkb<span class="token operator">+</span>ZP9d<span class="token operator">/</span>u<span class="token comment">//TAJuA7IDdAS8DHQPFgYcD3wd5Bc0OOhGMBYcFlwa3hmiFJIVUhTwMNQ3NCq0L7QtzDZsZdiKcEB4ZvjL8FsuQxWHVsvoi3CNmR5yOpEYmRFZFPoqyjRJHNUWj0RHRq6Lvx1jECGMaYkEsK3ZV7IM4q7j8uD/GEcfFjase9yTeKX5W/LkEesKUhF0J7xIDE5cn3kuyTpImtSSrJ09Mrk1+nxKcUp7SMX70+NnjL6XqpwpSG9NIaclp29P6J4RMWDOhe6LrxJKJNydZTZo+6cJk/cm5k49OUZ/CnnIwnZCekr4r/TM7ll3D7s9gZazP6OMEcdZyXnD9uau5PTwfXjnvaaZPZnnmsyyfrFVZPXw/fgW/VxAkqBK8yg7P3pT9Pic2Z0fOYG5K7r48lbz0vCNCLWGO8PRUo6nTp7aL7EQloo58r/w1+X3iSPF2CSKZJGks0IaH7MtSa+kv0s5C38Lqwg/TkqcdnK45XTj98gzbGUtmPC0KLfptJj6TM7Nllsms+bM6ZwfM3jIHmZMxp2Wu2dyFc7vnhc3bOZ8yP2f+n8WOxeXFbxekLGhaaLhw3sKuX8J+qStRKxGX3FrkvWjTYnyxYHHrEpcl65Z8LeWWXixzLKso+7yUs/Tir06/Vv46uCxzWetyt+UbVxBXCFfcXOm3cme5ZnlRedeq6FX1q5mrS1e/XTNlzYWKMRWb1lLWStd2VEZVNq4zX7di3ecqftWN6sDqfesN1i9Z/34Dd8PVjf4b924y3FS26dNmwebbW8K21NdY1lRsJW4t3PpkW/K2c795/Fa7XX972fYvO4Q7OnbG7zxd615bu8tg1/I6tE5a17N74u62PcF7Gvfa792yj7GvbD/YL93//Pf0328eiDzQctDj4N5DFofWH6YfLq1H6mfU9zXwGzoaUxvbj0QcaWnybjr8h8MfO5pNmquP6hxdfoxybOGxweNFx/tPiE70nsw62dUypeXeqfGnrp8ed7r1TOSZ82dDz546F3Du+Hmf880XvC4cuehxseGS26X6y66XD//p+ufhVrfW+ivuVxrbPNua2se2H7vqd/XkteBrZ6+zrl+6EXOj/WbSzdu3Jt7quM29/exO7p1XdwvvDtybd59wv/SBxoOKhwYPa/5l8699HW4dRzuDOy8/Snh0r4vT9eKx5PHn7oVPaE8qnho/rX3m/Ky5J7Sn7fmE590vRC8Gekv+0vxr/Uvrl4f+9v/7ct/4vu5X4leDr5e+0Xuz4+2Yty39cf0P3+W9G3hf+kHvw86PHh/PfUr59HRg2mfS58ovNl+avkZ+vT+YNzgoYovZ8qMABhuamQnA6x0A0FLh2aENAMoExd1MLojiPikn8J9YcX+TixsAO/wBSJoHQBQ8o2yEzQIyFb5lR/BEf4C6uAw3pUgyXZwVvqjwxkL4MDj4xhAAUhMAX8SDgwMbBge/bIPJ3gHgRL7iTigT2R10s4OM2rpfgh/l34RUcT2MnhaNAAAB90lEQVQ4Ee1Tv0tbURQ+5yVqFVHs4pBioSAp1mAxUdq05sfoKrh072QXN6HdnMTVyboLShH8D+xLg8UkhjY/tJlERIQilCpKfbmn3w08eOTdl83Nu5x7z/m+737vnHeJHtZ9d4CDLhARK1esfSChWWF6TSQnRLwnSq2mp2OnQTw3bxS2D349I77bAijuAt0oJNfEtJiKj392c6ZotSfhFJfdfUE+jn1eWZwe6HL6Q0yjqHyE6zALr+eK9bl2rvfsc2wXKwskvAZQbibxYsYL1nu7UJ1H2BKiq+bfsaFslp12jD4bHHPLCdwumQi4bBuiP+Gov3vwaMqEMQqz6EER9fHjwyASMGVdU6KeB2F8jjH9cw2+sS5Hg0jodUTXRNFlEMYvzPyjBVa0YCLZpcoE2pBBTYmokgmjcz5hZl7RJEz/vV2oLDcajR6XvHdYT0qTdzQPfd7s9D/7/gotYhdqn/Chy3ovQrfMVMUwh3HpE51rLaGqw+FMNhH97aa80SisAblC9R1EN/AYej0EpGgXpARyEbzKY4i/NYkHCmux/f3GgBP6l8EjiVp40nD8/c3k2Mm3Uu2pUvIVkBEt3vVIpV/FYhea466Owi7IFPPl40jTcfKojaBNB6mp8Wkvzjc8b7HTPvkyehYKh5NwXGbiP52wD7X76cB/EiWtaCMHwyUAAAAASUVORK5CYII=</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>字符串比较长，我们可以直接用这个字符串替换掉上文中的链接地址。你会发现浏览器原来是可以理解这个字符串的，它自动就将这个字符串解码为了一个图片，而不需再去发送 HTTP 请求。</p> <h3 id="_4-2-应用场景"><a href="#_4-2-应用场景" class="header-anchor">#</a> 4.2 应用场景</h3> <p>上面这个实例，其实源自我们 <a href="https://juejin.im/books" target="_blank" rel="noopener noreferrer">掘金<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 网站 Header 部分的搜索栏 Logo：</p> <p>大家不妨打开小册首页，然后打开开发者工具，在源码中搜索“base64”关键字，你会发现 Base64 码出现的地方真的不少。而且它对应的图片往往是<strong>非常小的 Logo</strong>。</p> <p>既然 Base64 这么棒，我们何不把大图也换成 Base64 呢？</p> <p>这是因为，Base64 编码后，图片大小会膨胀为原文件的 4/3（这是由 Base64 的编码原理决定的）。如果我们把大图也编码到 HTML 或 CSS 文件中，后者的体积会明显增加，即便我们减少了 HTTP 请求，也无法弥补这庞大的体积带来的性能开销，得不偿失。<br>
在传输非常小的图片的时候，Base64 带来的文件体积膨胀、以及浏览器解析 Base64 的时间开销，与它节省掉的 HTTP 请求开销相比，可以忽略不计，这时候才能真正体现出它在性能方面的优势。</p> <p>因此，Base64 并非万全之策，我们往往在一张图片满足以下条件时会对它应用 Base64 编码：</p> <ul><li>图片的实际尺寸很小（大家可以观察一下掘金页面的 Base64 图，几乎没有超过 2kb 的）</li> <li>图片无法以雪碧图的形式与其它小图结合（合成雪碧图仍是主要的减少 HTTP 请求的途径，Base64 是雪碧图的补充）</li> <li>图片的更新频率非常低（不需我们重复编码和修改文件内容，维护成本较低）</li></ul> <h3 id="_4-3-工具推荐"><a href="#_4-3-工具推荐" class="header-anchor">#</a> 4.3 工具推荐</h3> <p>这里最推荐的是利用 webpack 来进行 Base64 的编码——webpack 的 <a href="https://github.com/webpack-contrib/url-loader" target="_blank" rel="noopener noreferrer">url-loader<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 非常聪明，它除了具备基本的 Base64 转码能力，还可以结合文件大小，帮我们判断图片是否有必要进行 Base64 编码。</p> <p>除此之外，市面上免费的 Base64 编解码工具种类是非常多样化的，有很多网站都提供在线编解码的服务，大家选取自己认为顺手的工具就好。</p> <h2 id="_5-webp"><a href="#_5-webp" class="header-anchor">#</a> 5.WebP</h2> <p>关键字：<strong>年轻的全能型选手</strong></p> <p>WebP 是今天在座各类图片格式中最年轻的一位，它于 2010 年被提出， 是 Google 专为 Web 开发的一种<strong>旨在加快图片加载速度</strong>的图片格式，它支持有损压缩和无损压缩。</p> <h3 id="_5-1-优点"><a href="#_5-1-优点" class="header-anchor">#</a> 5.1 优点</h3> <p>WebP 像 JPEG 一样对细节丰富的图片信手拈来，像 PNG 一样支持透明，像 GIF 一样可以显示动态图片——它集多种图片文件格式的优点于一身。<br>
WebP 的官方介绍对这一点有着更权威的阐述：</p> <blockquote><p>与 PNG 相比，WebP 无损图像的尺寸缩小了 26％。在等效的 SSIM 质量指数下，WebP 有损图像比同类 JPEG 图像小 25-34％。 无损 WebP 支持透明度（也称为 alpha 通道），仅需 22％ 的额外字节。对于有损 RGB 压缩可接受的情况，有损 WebP 也支持透明度，与 PNG 相比，通常提供 3 倍的文件大小。</p></blockquote> <p>我们开篇提到，图片优化是质量与性能的博弈，从这个角度看，WebP 无疑是真正的赢家。</p> <h3 id="_5-2-缺点"><a href="#_5-2-缺点" class="header-anchor">#</a> 5.2 缺点</h3> <p>WebP 纵有千般好，但它毕竟<strong>太年轻</strong>。我们知道，任何新生事物，都逃不开兼容性的大坑。现在是 2018 年 9 月，WebP 的支持情况是这样的：</p> <p>坦白地说，虽然没有特别惨（毕竟还有亲爹 Chrome 在撑腰），但也足够让人望而却步了。</p> <p>此外，WebP 还会增加服务器的负担——和编码 JPG 文件相比，编码同样质量的 WebP 文件会占用更多的计算资源。</p> <h3 id="_5-3-应用场景"><a href="#_5-3-应用场景" class="header-anchor">#</a> 5.3 应用场景</h3> <p>现在限制我们使用 WebP 的最大问题不是“这个图片是否适合用 WebP 呈现”的问题，而是“浏览器是否允许 WebP”的问题，即我们上文谈到的兼容性问题。具体来说，一旦我们选择了 WebP，就要考虑在 Safari 等浏览器下它无法显示的问题，也就是说我们需要准备 PlanB，准备降级方案。</p> <p>目前真正把 WebP 格式落地到网页中的网站并不是很多，这其中淘宝首页对 WebP 兼容性问题的处理方式就非常有趣。我们可以打开 Chrome 的开发者工具搜索其源码里的 WebP 关键字：</p> <p>我们会发现检索结果还是挺多的（单就图示的加载结果来看，足足有  200  多条），下面大家注意一下这些 WebP 图片的链接地址（以其中一个为例）：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;img src=&quot;//img.alicdn.com/tps/i4/TB1CKSgIpXXXXccXXXX07tlTXXX-200-200.png_60x60.jpg_.webp&quot; alt=&quot;手机app - 聚划算&quot; class=&quot;app-icon&quot;&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>.webp 前面，还跟了一个 .jpg 后缀！</p> <p>我们现在先大胆地猜测，这个图片应该至少存在 jpg 和 webp 两种格式，程序会根据浏览器的型号、以及该型号是否支持 WebP 这些信息来决定当前浏览器显示的是 .webp 后缀还是 .jpg 后缀。带着这个预判，我们打开并不支持 WebP 格式的 Safari 来进入同样的页面，再次搜索 WebP 关键字：</p> <p>Safari 提示我们找不到，这也是情理之中。我们定位到刚刚示例的 WebP 图片所在的元素，查看一下它在 Safari 里的图片链接：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;img src=&quot;//img.alicdn.com/tps/i4/TB1CKSgIpXXXXccXXXX07tlTXXX-200-200.png_60x60.jpg&quot; alt=&quot;手机app - 聚划算&quot; class=&quot;app-icon&quot;&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>我们看到同样的一张图片，在 Safari 中的后缀从 .webp 变成了 .jpg！看来果然如此——站点确实是先进行了兼容性的预判，在浏览器环境支持 WebP 的情况下，优先使用 WebP 格式，否则就把图片降级为 JPG 格式（本质是对图片的链接地址作简单的字符串切割）。</p> <p>此外，还有另一个维护性更强、更加灵活的方案——把判断工作交给后端，由服务器根据 HTTP 请求头部的 Accept 字段来决定返回什么格式的图片。当 Accept 字段包含 image/webp 时，就返回 WebP 格式的图片，否则返回原图。这种做法的好处是，当浏览器对 WebP 格式图片的兼容支持发生改变时，我们也不用再去更新自己的兼容判定代码，只需要服务端像往常一样对 Accept 字段进行检查即可。</p> <p>由此也可以看出，我们 WebP 格式的局限性确实比较明显，如果决定使用 WebP，兼容性处理是必不可少的。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://gitee.com/zhoubichuan/web-javascript/edit/master/src/3.senior/5.optimize/4.img.md" target="_blank" rel="noopener noreferrer">在gitee上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/1/3下午4:29:31</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/web-javascript/3.senior/5.optimize/3.store.html" class="prev">
        三.本地存储
      </a></span> <span class="next"><a href="/web-javascript/3.senior/5.optimize/5.api.html">
        五.性能监测
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/web-javascript/assets/js/app.eecc1585.js" defer></script><script src="/web-javascript/assets/js/3.e9ec0dc9.js" defer></script><script src="/web-javascript/assets/js/104.5a65ca34.js" defer></script><script src="/web-javascript/assets/js/6.8c68cd55.js" defer></script>
  </body>
</html>
