---
lang: zh-CN
sidebarDepth: 0
meta:
  - name: description
    content: 个人总结的vuepress学习技术文档-语法
  - name: keywords
    content: vuepress,最新技术文档,vuepress语法,markdown语法
---

# V8 引擎解析

## 1.编译阶段

```js
var answer = 6 * 7
```

### 1.1 `一.词法分析（分词）`

将 js 代码中的字符串分割为有意义的代码块，这些代码块我们可以称为“词法单元”。[案例](https://esprima.org/demo/parse.html#)

```js
;[
  {
    type: "Keyword",
    value: "var",
  },
  {
    type: "Identifier",
    value: "answer",
  },
  {
    type: "Punctuator",
    value: "=",
  },
  {
    type: "Numeric",
    value: "6",
  },
  {
    type: "Punctuator",
    value: "*",
  },
  {
    type: "Numeric",
    value: "7",
  },
  {
    type: "Punctuator",
    value: ";",
  },
]
```

### 1.2 `二.语法分析（解析）`

将词法单元流转换成一颗抽象语法树（AST）。[案例](https://esprima.org/demo/parse.html)

```js
{
  "type": "Program",
  "body": [
    {
      "type": "VariableDeclaration",
      "declarations": [
        {
          "type": "VariableDeclarator",
          "id": {
            "type": "Identifier",
            "name": "answer"
          },
          "init": {
            "type": "BinaryExpression",
            "operator": "*",
            "left": {
              "type": "Literal",
              "value": 6,
              "raw": "6"
            },
            "right": {
              "type": "Literal",
              "value": 7,
              "raw": "7"
            }
          }
        }
      ],
      "kind": "var"
    }
  ],
  "sourceType": "script"
}
```

### 1.3 `二.代码生成`

在 js 文件或 script 里面的代码在正式开始执行之前，会进行一些解析工作,将上面生成的语法树解析成可执行的代码。

## 2.运行阶段

代码运行前先创建执行环境

- `三.执行上下文`：在相关[数据结构](//base/5.structure/1.index.html)(`执行栈`)中创建[执行上下文]()，里面包含相关[数据类型](//base/6.type/1.index.html)的变量

- `四.创建变量对象`

- `五.确定作用域链`：确定变量的访问规则

- `六.闭包`

- `七.确定 this 指向`
  在浏览器环境中，javascript 引擎会按照 script 标签代码块从上到下的顺序加载并立即解释执行

- `八.同步与异步`

- `九.事件环`

  ![](./1.png)
