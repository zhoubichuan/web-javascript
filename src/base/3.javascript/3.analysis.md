---
lang: zh-CN
sidebarDepth: 2
meta:
  - name: description
    content: 个人总结的vuepress学习技术文档-语法
  - name: keywords
    content: vuepress,最新技术文档,vuepress语法,markdown语法
---

# 三.预解析

- 预解释（变量提升），是指在当前作用域下，JS 代码从上到下执行之前，浏览器会默认先把带 var 和 function 关键字的进行提前声明或者定义。
- 声明：只声明，没有定义，如 var num,此时 num 的默认值是 undefined
- 定义：即赋值操作

## 1.var 的预解释

var 预解释的时候只提前声明，在代码执行的过程中才定义赋值。

```js
console.log(a)
var a = 1
console.log(a)
// - 代码运行过程
//   - 预解释
//     - a=undefined
//   - 代码执行
//     - console.log(a)
//     - a=1
//     - console.log(a)
```

## 2.function 的预解释

function 预解释的时候，声明和定义都完成了。

```js
var num = 12
function fn() {
  console.log(num)
  var num = 13
  console.log(num)
}
fn()
// - 代码运行过程
//   - 预解释
//     - num=undefined
//     - function fn(){"console.log(num);var num = 13; console.log(num)"}
//   - 代码执行
//     - num =12
//     - 私有作用域下的预解释
//       - num=undefined
//     - 私有作用域下代码执行
//       - console.log(num)//undefined
//       - num=13
//       - console.log(num)//13
```

## 3.预解释的一些情况

### 3.1 不管条件是否成立，都会进行预解释

```js
if (!("a" in window)) {
  var a = 1
}
console.log(a)
// - 预解释
//   - a=undefined//window.a=undefined(全局作用域下定义的)
// - 代码执行
//   - !('a' in window)//false
//   - console.log(a)
//     3.2 只对"="左边的进行预解释，右边的是值，不进行预解释
```

```js
fn()
var fn = function() {
  console.log(1)
}
// - 预解释
//   - fn = undefined
// - 代码执行
//   - fn()//报错
```

### 3.3 window 下对自执行函数是不进行预解释的，自执行函数的定义和执行是一起完成的。但是在执行的过程中，它的私有作用域中是要进行预解释的

```js
;(function(num) {
  console.log(num)
})(100)
// - 预解释
//   - 无
// - 代码执行
//   - console.log(100)
```

### 3.4 函数体中 return 后面的返回值不预解释，但是 return 后面的代码，虽然不执行，但是要预解释

```js
function fn() {
  console.log(num)
  return function() {}
  var num = 12
}
fn()
// - 预解释
//   - function fn(){"console.log(num);return function(){};var num=12"}
// - 代码执行

//   - fn()
//   - 私有作用域下的预解释
//     - function(){""}
//     - num = undefined
//   - 私有作用域下代码的执行

//     - console.log(num)//undefined
//     - num= 12
```

### 3.5 关于重名变量和预解释

```js
function a(x) {}
var a
console.log(a)
// - 预解释
//   - function a(x){""}
// - 代码执行
//   - console.log(a)
```

- 重命名变量 a 又被声明了一次，浏览器在预解释的时候发现已经有一个同名变量 a 了，就不去重复声明了，并且在声明的时候也没有被赋值，则变量 a 还是保持原来的值不变。
- 如果预解释的时候发现重名了，不重新的声明，但是需要重新的定义。（即后面发现是重名的变量，如果该重名变量只是声明没有定义时，可以忽略，但是该重名变量声明并赋值，是需要重新声明的。）
