<!DOCTYPE html>
<html>

<head lang="en">
    <meta charset="UTF-8">
    <title>postMessage</title>
</head>

<body>

    <script type="text/javascript">
        //高级api 不兼容 socket.io（一般使用它）
        let socket = new WebSocket('ws://localhost:3000')

        //连接被打开是调用
        socket.onopen = function () {
            socket.send('a页面数据')
        }

        //在出现错误时调用，例如在链接断掉时
        socket.onclose = function () {

        }

        //在服务器端向客户端发送消息时调用
        socket.onmessage = function (e) {
            console.log(e.data)
        }

        /* //给服务端发送一些数据
        socket.send('data')

        //关闭接口
        socket.close() */
    </script>
</body>

</html>