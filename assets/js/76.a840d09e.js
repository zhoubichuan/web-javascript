(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{472:function(s,a,n){"use strict";n.r(a);var e=n(7),t=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"_1-javascript异步的发展史"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-javascript异步的发展史"}},[s._v("#")]),s._v(" 1.javascript异步的发展史")]),s._v(" "),a("p",[s._v("callback ->  promise -> generator + co -> async+await(语法糖)")]),s._v(" "),a("p",[s._v("思路：")]),s._v(" "),a("p",[s._v("本地有三个文件，三个文件的中第一个文件存放第二个文件的地址，第二个文件存放第三个文件的地址，第三个文件存放最后的结果，从文件一读取文件二的地址，根据这个地址读取文件三的内容。")]),s._v(" "),a("p",[s._v("准备工作：")]),s._v(" "),a("p",[s._v("我们在本地建立三txt个文件：one.txt里面内容放two.txt、two.txt里面内容放three.txt、three.txt里面放“恭喜你完成了本次的训练！！”")]),s._v(" "),a("h3",{attrs:{id:"_1、callback-存在回调地狱的问题-导致代码难以维护"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、callback-存在回调地狱的问题-导致代码难以维护"}},[s._v("#")]),s._v(" 1、callback（存在回调地狱的问题，导致代码难以维护）")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('let fs = require("fs");\nfunction getDate(url,callback){\n    fs.readFile(url,"utf8",function(err,data){\n        callback && callback(data);\n    });\n};\ngetDate("one.txt",function(data){\n    console.log("1",data);\n    getDate(data,function(data){\n        console.log("2",data);\n        getDate(data,function(data){\n            console.log("3",data);\n        })\n    })\n})\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("p",[s._v("结果")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("//1 two.txt\n//2 three.txt\n//3 \ufeff恭喜你完成了本次的训练！！！\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"_2、promise"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、promise"}},[s._v("#")]),s._v(" 2、promise")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('let fs = require("fs");\nfunction getDate(url){\n    return new Promise(function(resolve,reject){\n        let date = fs.readFile(url,"utf8",function(err,date){\n            err ? reject(err) : resolve(date);\n        });\n    });\n}\ngetDate("one.txt")\n    .then(function(success){\n        console.log("1",success);\n        return getDate(success);\n    },function(fail){\n        console.log("1",fail);\n    })\n    .then(function(success){\n        console.log("2",success);\n        return getDate(success);\n    },function(fail){\n        console.log("1",fail);\n    })\n    .then(function(success){\n        console.log("3",success)\n    },function(fail){\n        console.log("1",fail);\n    })\n结果\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("//1 two.txt\n//2 three.txt\n//3 \ufeff恭喜你完成了本次的训练！！！\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"_3、generator-配合promise使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、generator-配合promise使用"}},[s._v("#")]),s._v(" 3、generator（配合promise使用）")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('let fs = require("fs");\nlet bluebird=require("bluebird");\nlet read=bluebird.promisify(fs.readFile)//使其promise化\nfunction *getDateLast(){\n    let date1 = yield read("one.txt","utf8");\n    let date2 = yield read(date1,"utf8");\n    let date3 = yield read(date2,"utf8");\n    let date4 = yield read(date3,"utf8");\n}\nvar content = getDateLast()\n    content.next().value.then(function(data){\n            console.log("2"+data)\n            content.next(data).value.then(function(data){\n                console.log("3"+data)\n                content.next(data).value.then(function(data){\n                    console.log("4"+data)\n                });\n            });\n    });\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])]),a("p",[s._v("结果")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("//2two.txt\n//3three.txt\n//4\ufeff恭喜你完成了本次的训练！！！\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"_4、async-await-配合promise使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、async-await-配合promise使用"}},[s._v("#")]),s._v(" 4、async + await（配合promise使用）")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('let fs=require("fs");\nlet bluebird=require("bluebird");\nlet read=bluebird.promisify(fs.readFile);//使其promise化\nasync function getDate(date){\n    let date1=await read(date,"utf8");\n    let date2=await read(date1);\n    let date3=await read(date2);\n    return date3;\n}\ngetDate("one.txt").then(function(success){\n    console.log("success"+success)\n})\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("结果")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("//success\ufeff恭喜你完成了本次的训练！！！\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);